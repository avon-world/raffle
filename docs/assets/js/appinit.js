/*! raffle v1.0.0 | ISC License | https://github.com/avon-world/raffle */
Array.prototype.shuffle=function(a){var b=[],c=Object.assign([],this),d=c.length,e=null,f=null;for(e=0;e<d;e++)f=~~(Math.random()*c.length),b.push(c[f]),c.splice(f,1);return Object.assign(this,b),this},window.debuger=!0,function(a){window.debuger="boolean"==typeof window.debuger&&window.debuger,a(".inputnumber").each(function(){var b=a(this),c=a(".up",b),d=a(".down",b),e=a("input[type=number]",b),f=parseFloat(e.val())?parseFloat(e.val()):0,g=parseFloat(e.attr("step"))?parseFloat(e.attr("step")):1,h=0,i=0,j=function(a){if(!e[0].disabled){var b=parseFloat(e.val())?parseFloat(e.val()):0;switch(f=b,a){case"min":if(parseFloat(e.attr("min"))){var c=parseFloat(e.attr("min"));b=f-g,f=b<c?f:b}else f-=g;break;case"max":if(parseFloat(e.attr("max"))){var d=parseFloat(e.attr("max"));b=f+g,f=b>d?f:b}else f+=g}e.val(f).trigger("input")}};e.on("input change",function(a){f=parseFloat(e.val())?parseFloat(e.val()):0}),d.on("click",function(a){return a.preventDefault(),!1}).on("mousedown",function(){clearInterval(h),clearTimeout(i),j("min"),i=setTimeout(function(){h=setInterval(function(){j("min")},50)},250)}),c.on("click",function(a){return a.preventDefault(),!1}).on("mousedown",function(){clearInterval(h),clearTimeout(i),j("max"),i=setTimeout(function(){h=setInterval(function(){j("max")},50)},250)}),a(document).on("mouseup",function(a){clearInterval(h),clearTimeout(i)}).on("mouseleave",".up, .down",function(a){clearInterval(h),clearTimeout(i)})});var b=[],c=0,d=0,e=0,f=!1,g=a("#loto"),h=a("#prizes"),i=a("#result"),j=a("button.rf-raffle"),k=a("#btnclear"),l=a("#btnadd"),m=function(){var c,f,h;clearTimeout(d),a("span[data-number]",g).removeClass("pre-active"),j.hasClass("active")||j.addClass("active"),++e,e<70?(b.shuffle(),c=b.length-1,f=Math.round(Math.random()*c+c-c),h=b[f],a("span[data-number='"+h+"']",g).addClass("pre-active"),d=setTimeout(m,60)):(e=0,c=b.length-1,f=Math.round(Math.random()*c+c-c),h=b[f],a("span[data-number="+h+"]",g).addClass("active"),b.splice(f,1),q(h),b.length?(1==b.length&&(e=70),d=setTimeout(m,3e3)):n())},n=function(){[].forEach.call(a("button, input"),function(b){"btnclear"!=a(b).attr("id")&&b.removeAttribute("disabled")}),a(".inputnumber").removeClass("disabled"),j.removeClass("active"),a("#btnadd")[0].removeAttribute("disabled"),f=!1,e=0,h.children().length?a("#btnclear")[0].removeAttribute("disabled"):a("#btnclear").attr("disabled","disabled")},o=function(){setTimeout(function(){a(window).trigger("resize")},5)},p=function(d){g.empty(),b=[],ret=parseInt(d),c=ret;for(var e=0;e<ret;++e){var f=e+1,h=a(document.createElement("span")).attr("data-number",f);b.push(f),g.append(h.append(document.createElement("span")))}o()},q=function(b){var c,d,e=h.children(),f={};e.length&&(c=e.first(),d=c.parent(),c.addClass("active").attr({"data-number":b}),{top:c.offset().top,left:c.offset().left,width:c.width(),height:c.height()},f={left:i.offset().left,width:i.width()},setTimeout(function(){c.css({position:"absolute","z-index":1e3,top:c.offset().top,left:c.offset().left,width:c.width(),height:c.height()}).parent().css({paddingTop:c.height()}),a("body").prepend(c),c.animate(f,1e3,function(){c.animate({top:i.offset().top+i.height()},500,function(){i.append(c.removeAttr("style")),d.animate({padding:0},500,function(){d.removeAttr("style")})})})},1e3))};if("function"==typeof MutationObserver){var r=a("#prizes")[0],s=a("#btnclear")[0],t={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},u=function(b){a(r).children().length?s.disabled&&s.removeAttribute("disabled"):s.disabled||a(s).attr("disabled","disabled"),f&&a(s).attr("disabled","disabled")};new MutationObserver(u).observe(r,t)}j.on("click",function(d){return d.preventDefault(),!f&&b.length&&(c=b.length,f=!0,e=0,a(".inputnumber").addClass("disabled"),a("input[type=number], #btnadd").attr("disabled","disabled"),m(),a(this).addClass("active")),!1}),a("input[type='number']").on("blur",function(b){var c=a(this),d=c.attr("id"),e=parseInt(c.val());e||(e=1,c.val(e)),"sizenum"==d&&p(e)}).on("input change",function(b){var c=a(this),d=c.attr("id"),e=parseInt(c.val());e=e||0,"sizenum"==d&&p(e)}),a("input[type='number']").trigger("input"),a(".date").attr({"data-date":function(){var a=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],b=new Date;return" от "+b.getDate()+a[b.getMonth()]+" "+b.getFullYear()+" г."}()}),k.on("click",function(a){return a.preventDefault(),h.empty(),!1}),l.on("click",function(b){b.preventDefault();var c,d,e=h.children(),f={};return e.length&&(c=e.first(),d=c.parent(),c.addClass("active").attr({"data-number":50}),{top:c.offset().top,left:c.offset().left,width:c.width(),height:c.height()},f={left:i.offset().left,width:i.width()},setTimeout(function(){c.css({position:"absolute","z-index":1e3,top:c.offset().top,left:c.offset().left,width:c.width(),height:c.height()}).parent().css({paddingTop:c.height()}),a("body").prepend(c),c.animate(f,1e3,function(){c.animate({top:i.offset().top+i.height()},500,function(){i.append(c.removeAttr("style")),d.animate({padding:0},500,function(){d.removeAttr("style")})})})},1e3)),!1})}(jQuery);
//# sourceMappingURL=appinit.js.map